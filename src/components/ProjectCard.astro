---
import Card from './Card.astro';
import Badge from './Badge.astro';

export interface Props {
  id?: string;
  title: string;
  thumbnail?: string;
  thumbnailAlt?: string;
  description?: string;
  techStack?: string[];
  liveLink?: string;
  sourceLink?: string;
}

const {
  id,
  title,
  thumbnail,
  thumbnailAlt,
  description,
  techStack,
  liveLink,
  sourceLink,
} = Astro.props as Props;
---
<Card
  key={id || title}
  interactive={true}
  class="backdrop-blur-sm bg-[color-mix(in_oklch,var(--color-mh-bg)_82%,transparent)]"
>
  <div slot="header" class="flex items-center gap-4">
    {thumbnail && (
      <div class="bg-mh-bg/50 rounded-full size-16">
        <img
          class="m-2"
          src={thumbnail}
          alt={thumbnailAlt || title}
          loading="lazy"
          decoding="async"
        />
      </div>
    )}
    <h3 class="text-2xl font-semibold leading-tight text-mh-text">
      {title}
    </h3>
  </div>
  <p class="text-base text-mh-muted mx-1 my-2">{description}</p>
  <div class="pt-2 text-sm text-mh-muted">
    {techStack?.map((tech) => (
        <Badge title={tech} class="bg-mh-bg/30 mr-2 mb-2" />
    ))}
  </div>
  <div slot="footer" class="pt-2 text-sm text-mh-muted">
    <div class="pt-3 flex flex-wrap gap-3 justify-end">
      {liveLink && (
        <a
          href={liveLink}
          class="inline-flex items-center gap-2 px-3 py-1 rounded-md bg-mh-text text-mh-bg font-semibold text-sm hover:bg-[color-mix(in_oklch,var(--color-mh-text)_86%,var(--color-mh-warm)_14%)] transition-colors"
          target="_blank"
          rel="noreferrer"
        >
          <svg
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
            aria-hidden="true"
            class="shrink-0"
          >
            <path d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418" />
          </svg>
          <span>Live Site</span>
        </a>
      )}
      {sourceLink && (
        <a
          href={sourceLink}
          class="inline-flex items-center gap-2 px-3 py-1 rounded-md bg-mh-text text-mh-bg font-semibold text-sm hover:bg-[color-mix(in_oklch,var(--color-mh-text)_86%,var(--color-mh-warm)_14%)] transition-colors"
          target="_blank"
          rel="noreferrer"
        >
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M12 .5C5.4.5 0 5.9 0 12.5c0 5.3 3.4 9.8 8.2 11.4.6.1.8-.3.8-.6v-2.1c-3.3.7-4-1.4-4-1.4-.5-1.2-1.2-1.6-1.2-1.6-1-.7.1-.7.1-.7 1.1.1 1.6 1.2 1.6 1.2 1 1.7 2.6 1.2 3.2.9.1-.8.4-1.2.7-1.5-2.7-.3-5.5-1.4-5.5-6 0-1.2.5-2.3 1.2-3.1-.1-.3-.5-1.6.1-3.3 0 0 1-.3 3.3 1.2a11.2 11.2 0 0 1 6 0c2.2-1.5 3.3-1.2 3.3-1.2.6 1.7.2 3 .1 3.3.8.8 1.2 1.9 1.2 3.1 0 4.6-2.8 5.7-5.5 6 .4.3.8 1 .8 2v3c0 .3.2.7.8.6A12 12 0 0 0 24 12.5C24 5.9 18.6.5 12 .5Z"/>
          </svg>
          <span>Source</span>
        </a>
      )}
    </div>
  </div>
</Card>
