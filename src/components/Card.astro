---
export interface Props {
  as?: keyof HTMLElementTagNameMap | 'div';
  id?: string;
  interactive?: boolean;
  blur?: boolean;
  padding?: string;   // e.g. 'p-7'
  rounded?: string;   // e.g. 'rounded-[2rem]'
  class?: string;
}

const {
  as = 'div',
  id,
  interactive = false,
  blur = false,
  padding = 'p-5',
  rounded = 'rounded-lg',
  class: className = '',
  ...rest
} = Astro.props as Props;

const base = `flex flex-col ${rounded} ${padding}`;
const palette =
  "bg-[var(--card-surface-gradient)] text-card-foreground border border-[var(--card-border)] shadow-[var(--card-shadow)]";
const paletteDark =
  "dark:bg-[var(--card-surface-gradient-dark)] dark:text-card-foreground-dark dark:border-[var(--card-border-dark)] dark:shadow-[var(--card-shadow-dark)]";

const inter = interactive
  ? "transition-transform duration-200 hover:-translate-y-[3px] hover:border-[var(--card-hover-border)] hover:shadow-[var(--card-hover-shadow)] dark:hover:border-[var(--card-hover-border-dark)] dark:hover:shadow-[var(--card-hover-shadow-dark)]"
  : '';

const blurClass = blur
  ? "backdrop-blur-sm bg-[color-mix(in_oklch,var(--color-background)_82%,transparent)]"
  : '';
const classes = [base, palette, paletteDark, inter, blurClass, className].join(' ');
const Tag = as as any;

const hasFooter = Astro.slots.has('footer');
---
<Tag id={id} class={classes} {...rest}>
  <slot name="header" />
  <div class="space-y-3">
    <slot />
  </div>
  {hasFooter && (
    <div class="grow content-end mt-4">
      <slot name="footer" />
    </div>
  )}
</Tag>
