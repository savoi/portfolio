---
import { getCollection } from 'astro:content';
import FullWidthHeroLayout from '~/layouts/FullWidthHeroLayout.astro';
import ShaderCardStage from '~/components/ShaderCardStage.astro';
import BlogPostCard from '~/components/BlogPostCard.astro';

const posts = (await getCollection('blog'))
  .filter((entry) => !entry.data.draft)
  .sort((a, b) => new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime());

const blogPostCards = posts.map(({ id, data, slug }) => ({
  component: BlogPostCard,
  props: {
    id,
    title: data.title,
    description: data.description,
    publishDate: data.publishDate,
    tags: data.tags,
    slug,
  },
}));
---
<FullWidthHeroLayout
  title="Blog Â· Josh"
  description="Writing about creative coding, process, and experiments."
  page="blog"
  pageHeading="Musings from the workshop."
  pageSubheading="Exploring the intersection of code, design, and storytelling through articles, tutorials, and experiments."
>
  <ShaderCardStage
    slot="overlay"
    shader="colorPanels"
    shaderQuality="high"
    speed={1}
    speedDark={0.5}
    columns={3}
    shaderProps={{
      colors: ["#FFEB6E", "#F3BC79", "#D9AB9B", "#B09CA7"],
      colorBack: "#687899",
      density: 3,
      angle1: -0.5,
      angle2: -0.5,
      length: 1,
      edges: 1,
      blur: 0.2,
      fadeIn: 0.4,
      fadeOut: 0.8,
      gradient: 0.5,
      scale: 1.5,
      offsetY: 0,
      rotation: 350,
    }}
    cards={blogPostCards}
  >
</FullWidthHeroLayout>
