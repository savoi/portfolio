---
import { getCollection } from 'astro:content';
import FullWidthHeroLayout from '../layouts/FullWidthHeroLayout.astro';
import ArtefactCard from '../components/ArtefactCard.astro';
import ShaderCardStage from '~/components/ShaderCardStage.astro';
import { paletteHex } from '~/lib/colors';

const artefacts = (await getCollection('artefacts')).sort((a, b) => (b.data.year ?? 0) - (a.data.year ?? 0));

const artefactCards = artefacts.map(({ id, data }) => ({
  component: ArtefactCard,
  props: {
    id,
    title: data.title,
    summary: data.summary,
    type: data.type,
    year: data.year,
    link: data.link,
    linkText: data.linkText,
  },
}));
---
<FullWidthHeroLayout
  title="Artefacts Â· Josh"
  description="An archive of small, strange, and delightful outputs."
  page="artefacts"
  pageHeading="Side quests, notebooks, loops, and ephemera."
  pageSubheading="Explore the collection of artefacts I've collected over the years."
>
  <ShaderCardStage 
    slot="overlay"
    shader="grainGradient"
    shaderProps={{
      colors: [paletteHex.mhLilacAsh, paletteHex.mhPowderBlush, paletteHex.mhSunlitClay, paletteHex.mhBananaCream],
      colorBack: paletteHex.mhLavenderGrey,
      softness: 1,
      intensity: 0.2,
      noise: 0.2,
      shape: "wave",
      speed: 0.5,
      scale: 0.8,
      rotation: 15
    }}
    cards={artefactCards}
  />
</FullWidthHeroLayout>
